{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{\"1OyB\":function(t,e,n){\"use strict\";function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}n.d(e,\"a\",(function(){return o}))},\"6b8u\":function(t,e,n){!function(t,e){\"use strict\";e=e&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e;var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function i(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},\"function\"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}var s=function(t){var n=this;this._models={},this.count=function(){return e.size(n.get())},this.get=function(){return n._models},this.manager=function(){return n._m},this.reset=function(){return n._models={}},this.node=function(t){return n.get()[t]},this.add=function(t){return n._models[t.super().option().key()]=t},this.exist=function(t){return n.get()[t]},this.hydrate=function(t){return n.forEach((function(e,n){return e.hydrate(t[n]).save()}))},this.connectAll=function(){return o(n,void 0,void 0,(function(){var t,e,n,o;return i(this,(function(i){switch(i.label){case 0:for(e in t=[],this.get())t.push(e);n=0,i.label=1;case 1:return n<t.length?(o=t[n],[4,this.manager().connectModel(this.node(o))]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},this.forEach=function(t){for(var e in n.get())t(n.get()[e],e)},this._m=t},a=\"react\",c=\"react-native\",u=\"next-js\",l=new function(){var t=this;this._env=a,this._isDev=!0,this._logger=!1,this._storeEngine=\"undefined\"===typeof document?null:localStorage,this.done=function(){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,v.init()];case 1:return[2,t.sent()]}}))}))},this.isNextJSServer=function(){return t.isNextJS()&&\"undefined\"===typeof document},this.isNextJS=function(){return t._env===u},this.isReactNative=function(){return t._env===c},this.isReact=function(){return t._env===a},this.setEnvAsNextJS=function(){return t._env=u},this.isDevMode=function(){return t._isDev},this.setAsProduction=function(){return t._isDev=!1},this.isLoggerEnabled=function(){return t._logger},this.enableLogger=function(){return t._logger=!0},this.getStoreEngine=function(){return t._storeEngine},this.setStoreEngine=function(e){return t._storeEngine=e},\"undefined\"!==typeof window&&navigator&&\"ReactNative\"==navigator.product&&(this._env=c)},f={unauthorizedSave:function(t){return new Error(\"You've attempted to call save in the \"+(t.is().collection()?\"Collection\":\"Model\")+\" \"+t.constructor.name+\" but you either didn't specify it as a connected \"+(t.is().collection()?\"Collection\":\"Model\")+' or didn\\'t specify the config has done at the root of your project: \"config.done()\"')},unauthorizedCookieAdd:function(t){return new Error(\"You've attempted to call cookie in the \"+(t.is().collection()?\"Collection\":\"Model\")+\" \"+t.constructor.name+\" (key: \"+t.super().option().key()+\"), but this functionnality is unavailable in it for these reasons:\\n1. Doesn't have a unique specified key in the building options.\\n2. It is not connected to the store.\\n3. You didn't specify the config has done at the root of your project: \\\"config.done()\\\"\\n4. You are using React Native\")},unauthorizedLocalStore:function(t){return new Error(\"You've attempted to call localStore in the \"+(t.is().collection()?\"Collection\":\"Model\")+\" \"+t.constructor.name+\" (key: \"+t.super().option().key()+\"), but this functionnality is unavailable in it for these reasons:\\n1. Doesn't have a unique specified key in the building options.\\n2. It is not connected to the store\\n3. You didn't specify the config has done at the root of your project: \\\"config.done()\\\"\\n4. You are using NextJS.\")},onlyObjectOnModelState:function(){return new Error(\"The state of a Model, can only be instanced and replaced with an object type.\")},onlyArrayOnCollectionState:function(){return new Error(\"The state of a Collection, can only be instanced and replaced with an array type.\")},uniqKeyRequiredOnNextJS:function(){return new Error(\"In a NextJS environment you need to manually setup a unique key for every connected Model and Collection you instance.\")},keyAlreadyExist:function(t){return new Error(\"You have 2 connected Models/Collections using the same key: \"+t+\".\")},forbiddenArrayModel:function(t){return new Error(t.constructor.name+\"'s state contains an Array of Model. Please use a Collection instead.\")},forbiddenNestedConnexion:function(t){return new Error(t.constructor.name+\" contains a connected Model. Connected Models can't be nested\")},forbiddenMultiDimCollection:function(){return new Error(\"You can't build a Collection with a Collection as a node element\")},forbiddenModelCollection:function(){return new Error(\"You can't build a Collection with a Model as a collection element\")},cookieDisabledOnRN:function(){return new Error(\"Cookie Management is not accessible on React Native, please use local store instead.\")},cookieMaxLengthReached:function(t,e,n){return new Error(\"You've attempted to set cookie with the (key: \"+t+\"), but this action can't be executed because the max length of a cookie is \"+e+\" for most browsers, the one you set was \"+n+\".\")},unsetLocalStore:function(){return new Error(\"The local store engine should be set manually at the root of your app when using React-Native -> config.setStoreEngine(AsyncStore)\")},localStoreDisabled:function(){return new Error(\"Local store is not accessible for one of these reasons.\\n1. Local store doesn't work with NextJS.\\n2. The local store engine should be set manually at the root of your app if using React-Native -> config.setStoreEngine(AsyncStore)\")},cookiePriorityOverStore:function(){return new Error(\"You've attempted to add to the local store, a data already present in the cookies. Cookies have priority over local store, empty your cookes linked with the key before performing this action.\")},configNotDone:function(){return new Error('You need to specify the config has done at the root of your project: \"config.done()\" to run Acey.')}},d=function(t){var e=this;this._subscribers=[],this.count=function(){return e._subscribers.length},this.add=function(t){t(),e.get().push(t),e.manager().pendingHydrationStore().execute()},this.notify=function(){if(e.manager().isInitialized())e.get().forEach((function(t){return t()}));else if(l.isReactNative())throw f.configNotDone()},this.reset=function(){return e._subscribers=[]},this.manager=function(){return e._m},this.get=function(){return e._subscribers},this._m=t},h=function(t){var n=this;this._transitions={},this.get=function(){return n._transitions},this.count=function(){return e.size(n.get())},this._newTransition=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=\"\"),function(n,o){void 0===n&&(n=t);var i=o.payload,r=n;return o.type==e&&(r=i||n),r}},this.add=function(t){var e=t.super().option().key();n.get()[e]=n._newTransition(t.to().plain(),e)},this.forEach=function(t){for(var e in n.get())t(n.get()[e],e)},this.execute=function(t){n.forEach((function(e,o){var i,r=n.manager().store;r().set(((i={})[o]=e(r().node(o),t),i))}))},this.manager=function(){return n._m},this.reset=function(){return n._transitions={}},this._m=t},_=function(t){var n=this;this._store={},this.get=function(){return e.cloneDeep(n._store)},this.manager=function(){return n._m},this.reset=function(){return n._store={}},this.set=function(t){return n._store=Object.assign({},n.get(),t)},this.node=function(t){return n.get()[t]},this.dispatch=function(t){n.manager().transitions().execute(t),n.manager().subscribers().notify()},this._m=t},p=function(t){var n=this;this._pendingHydration={},this.count=function(){return e.size(n.get())},this.get=function(){return n._pendingHydration},this.manager=function(){return n._m},this.reset=function(){return n._pendingHydration={}},this.set=function(t){return n._pendingHydration=Object.assign({},n.get(),t)},this.node=function(t){return n.get()[t]},this.execute=function(){for(var t in n.get()){var e=n.manager().models().node(t);e&&(e.hydrate(n.node(t)).save(),delete n.get()[t])}},this._m=t},g=function(){var t=this;if(this.LOCAL_STORAGE_KEYS_ID=\"_ascey_local_ids\",this._keys={},this.engine=function(){return l.getStoreEngine()},this.getKeys=function(){return t._keys},this.toString=function(){return JSON.stringify(t._keys)},this.toJSON=function(e){return t._keys=JSON.parse(e)},this.isEnabled=function(){return!!t.engine()},this.addElement=function(e,n,o){if(void 0===o&&(o=7),t.engine()){if(!t.isEnabled())throw f.localStoreDisabled();t.engine().setItem(e,n),t.addKey(e,o)}},this.getElement=function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:if(!this.isEnabled())throw f.localStoreDisabled();return[4,this.engine().getItem(e)];case 1:return[2,t.sent()||void 0]}}))}))},this.removeElement=function(e){if(!t.isEnabled())throw f.localStoreDisabled();t.engine().removeItem(e),t.removeKey(e)},this.addKey=function(e,n){if(void 0===n&&(n=7),n<0)throw new Error(\"expire value can't be negative.\");if(!t.isEnabled())throw f.localStoreDisabled();var o=new Date;o.setSeconds(o.getSeconds()+86400*n),t.getKeys()[e]=o.toString(),t.engine().setItem(t.LOCAL_STORAGE_KEYS_ID,t.toString())},this.removeKey=function(e){if(!t.isEnabled())throw f.localStoreDisabled();t.getKeys()[e]&&(delete t.getKeys()[e],t.engine().setItem(t.LOCAL_STORAGE_KEYS_ID,t.toString()))},this.getKeyExpiration=function(e){if(!t.isEnabled())throw f.localStoreDisabled();var n=t.getKeys()[e];return n?new Date(n):void 0},this.prune=function(){if(!t.isEnabled())throw f.localStoreDisabled();for(var e in t.getKeys())t.engine().removeItem(e),delete t.getKeys()[e]},this._fetchKeys=function(){return o(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:if(!this.isEnabled())throw f.localStoreDisabled();return[4,this.engine().getItem(this.LOCAL_STORAGE_KEYS_ID)];case 1:return t=n.sent(),!e.isEmpty(t)&&this.toJSON(t),this._analyzeExpired(),[2]}}))}))},this._analyzeExpired=function(){if(!t.isEnabled())throw f.localStoreDisabled();var e=new Date;for(var n in t.getKeys()){var o=t.getKeyExpiration(n);o&&o<e&&t.removeKey(n)}},!l.isNextJSServer()){if(l.isReactNative()&&!this.engine())throw f.unsetLocalStore();this._fetchKeys()}},v=new function(){var t=this;this._localStoreManager=null,this._hasBeenInitialized=!1,this.reset=function(){t.subscribers().reset(),t.models().reset(),t.transitions().reset(),t.store().reset(),t.pendingHydrationStore().reset(),t._hasBeenInitialized=!1},this.init=function(e){return void 0===e&&(e=void 0),o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.isInitialized()?[3,2]:(this.setInitialized(),\"test\"!==e&&(this._localStoreManager=new g),[4,this.models().connectAll()]);case 1:t.sent(),this.pendingHydrationStore().execute(),t.label=2;case 2:return[2]}}))}))},this.localStoreManager=function(){return t._localStoreManager},this.models=function(){return t._modelsManager},this.transitions=function(){return t._transitionsManager},this.subscribers=function(){return t._subscribersManager},this.store=function(){return t._store},this.pendingHydrationStore=function(){return t._pendingHydrationStore},this.isInitialized=function(){return t._hasBeenInitialized},this.setInitialized=function(){return t._hasBeenInitialized=!0},this.prepareModel=function(e){t.models().add(e),t.isInitialized()&&t.connectModel(e)},this.connectModel=function(e){return o(t,void 0,void 0,(function(){var t,n,o,r;return i(this,(function(i){switch(i.label){case 0:return t=e.super().option().key(),this.transitions().add(e),this.store().set(((o={})[t]=e.to().plain(),o)),n||!e.localStore().isActive()?[3,2]:[4,e.localStore().get()];case 1:n=i.sent(),i.label=2;case 2:return n&&this.pendingHydrationStore().set(((r={})[t]=n,r)),[2]}}))}))},this._subscribersManager=new d(this),this._modelsManager=new s(this),this._transitionsManager=new h(this),this._store=new _(this),this._pendingHydrationStore=new p(this)},y=function(t){return t.replace(/^[\\|]+|[\\|]+$/g,\".\").split(\".\").filter((function(t){return\"\"!==t}))},b=function(t,e,n){var o,i=y(e),r=i[i.length-1];i.splice(i.length-1,1);var s=function(t,e){for(var n=y(t),o=0;o<n.length;o++)e=e instanceof I?e.state[n[o]]:e[n[o]];return e}(i.join(\".\"),n);if(s instanceof I&&s.is().collection())s.setState(s.to().listClass(t));else if(s instanceof I&&!I._isCollection(s.state[r]))s.setState(((o={})[r]=t,o));else if(I._isCollection(s.state[r])){var a=s.state[r];a.setState(a.to().listClass(t))}else r&&(s[r]=t)},S=function(t,e){var n=function(t,o){if(I._isArray(t))b(t,o,e);else if(I._isObject(t))for(var i in t)n(t[i],o+\".\"+i);else b(t,o,e)};n(t,\"\")},m=function(t,n){var o={},i=function(t,r){if(I._isObject(t)&&Object.keys(t).length>0)for(var s in t)i(t[s],r?r+\".\"+s:s);else if(I._isArray(t)&&t.length>0)for(var a=0;a<t.length;a++)i(t[a],r+\".\"+a.toString());else t instanceof I?i(t.state,r):(function(t){return\"store\"===t}(n)&&t instanceof Date&&(t=\"____AS-Date____\"+t.getTime().toString()),e.set(o,r,t))};return i(t.state,\"\"),t.is().collection()?o[\"\"]?o[\"\"]:[]:o},w=function(t){var n={},o=function(t,i){if(I._isObject(t)&&Object.keys(t).length>0)for(var r in t)o(t[r],i?i+\".\"+r:r);else if(I._isArray(t)&&t.length>0)for(var s=0;s<t.length;s++)o(t[s],i+\".\"+s.toString());else\"string\"===typeof t&&t.startsWith(\"____AS-Date____\")&&(t=new Date(parseInt(t.replace(\"____AS-Date____\",\"\")))),e.set(n,i,t)};return o(JSON.parse(t),\"\"),n},M=function(t){if(function(t){var e=!1,n=function(t){if(!e&&t&&!(t instanceof Date))if(t instanceof I)if(t.is().collection())for(var o=0,i=t.state;o<i.length;o++){var r=i[o];n(r)}else for(var s in t.state)n(t.state[s]);else if(Array.isArray(t))for(var a=0,c=t;a<c.length;a++){if((r=c[a])instanceof I)return void(e=!0);n(r)}else if(\"object\"===typeof t)for(var s in t)n(t[s])};return n(t),e}(t))throw f.forbiddenArrayModel(t);if(function(t){var e=!1,n=function(t){if(!e)if(t instanceof I){if(t.is().connected())return void(e=!0);if(t.is().collection())for(var o=0,i=t.state;o<i.length;o++){var r=i[o];n(r)}else for(var s in t.state)n(t.state[s])}else if(Array.isArray(t))for(var a=0,c=t;a<c.length;a++)r=c[a],n(r);else if(\"object\"===typeof t)for(var s in t)n(t[s])};return n(t),e}(t.state))throw f.forbiddenNestedConnexion(t)},E=function(t){var e=this;this._model=function(){return e._m},this.isActive=function(){return v.isInitialized()&&!l.isNextJSServer()&&!e._model().is().keyGenerated()&&e._model().is().connected()&&null!=v.localStoreManager()},this.get=function(){return o(e,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:return this.isActive()?(t=this._model().super().option().key(),[4,v.localStoreManager().getElement(t)]):[3,2];case 1:if(e=n.sent())return[2,I.ParseStoredJSON(e)];n.label=2;case 2:return[2,void 0]}}))}))},this.pull=function(){e._throwErrorIfInactive();var t=e.get();t&&e._model().hydrate(t).save()},this.set=function(t){void 0===t&&(t=365),e._throwErrorIfInactive();var n=e._model().super().option().key();try{v.localStoreManager().addElement(n,e._model().to().locallyStorableString(),t)}catch(o){console.log(\"error from localStore set with \"+(e._model().is().collection()?\"Collection\":\"Model\")+\": \"+n+\", \"+o)}return e._model().action()},this.remove=function(){e._throwErrorIfInactive();var t=e._model().super().option().key();try{v.localStoreManager().removeElement(t)}catch(n){console.log(\"error from localStore remove with \"+(e._model().is().collection()?\"Collection\":\"Model\")+\": \"+t+\", \"+n)}},this._throwErrorIfInactive=function(){if(!e.isActive())throw f.unauthorizedLocalStore(e._model())},this._m=t},A=function(t){var n=this;this._model=function(){return n._m},this.connected=function(){return n._model().super().option().isConnected()},this.equal=function(t){var e=n._model().to().string();return t instanceof I?t.to().string()===e:JSON.stringify(t)===e},this.empty=function(){return e.isEmpty(n._model().state)},this.collection=function(){return I._isArray(n._model().state)},this.keyGenerated=function(){return n._model().super().option().isKeyGenerated()},this.localStoreEnabled=function(){return n._model().localStore().isActive()},this._m=t},O=function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},C=function(t){for(var e,n=1,o=\"_auto_\"+t.constructor.name;e=\"_\"+n.toString(),v.models().exist(o+e);)n++;return o+e},k=function(t,e){var n=this;this._isKeyGenerated=!1,this._options={key:\"\",connected:!1,save:null,store:null,nodeModel:null,collectionModel:null},this._init=function(t){n._set(t);var e=n.key();if(n.isConnected()){if(l.isNextJS()&&!e)throw f.uniqKeyRequiredOnNextJS();if(e&&v.models().exist(e)&&!l.isNextJSServer())throw f.keyAlreadyExist(e);e||(n._setKey(C(n._model())),n._setKeyAsGenerated())}return n},this._setKey=function(t){return n._set({key:t})},this._setKeyAsGenerated=function(){return n._isKeyGenerated=!0},this._model=function(){return n._m},this._set=function(t){return n._options=Object.assign({},n._options,t)},this.isKeyGenerated=function(){return n._isKeyGenerated},this.get=function(){return n._options},this.key=function(){return n.get().key},this.isConnected=function(){return n.get().connected},this.nodeModel=function(){return n.get().nodeModel},this.collectionModel=function(){return n.get().collectionModel},this.kids=function(){return{save:n._model().action().save,store:n._model().action().store}},this._m=t,this._init(e)},K=function(t,e){var n=this;this.ID=function(){return n._id},this.stop=function(){return n._stopAction()},this._id=t,this._stopAction=e},N=function(t,n){var o=this;this._subscribers={},this._kidsSubscribersActions={},this._watchActionKids=null,this._model=function(){return o._m},this.get=function(){return o._subscribers},this.count=function(){return e.size(o.get())},this.add=function(t){var e=O(Math.random().toString()).toString();return o.get()[e]=t,o._isKidsActionsEnabled()&&o._addKidsSubscriberActions(e,t),new K(e,(function(){return o._isKidsActionsEnabled()&&o._stopKidsSubscriberActions(e),o.stop(e)}))},this.stop=function(t){return delete o.get()[t],o.count()},this.forEach=function(t){for(var e in o.get())t(o.get()[e],e);return o.count()},this.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.forEach((function(e){return e.apply(void 0,t)})),o._isKidsActionsEnabled()&&o._refreshKidsSubscriberActions(),o.count()},this.reset=function(){var t=o.count();return o.forEach((function(t,e){return delete o.get()[e]})),t},this._allKidsSubscriberActions=function(){return o._kidsSubscribersActions},this._subscriberKidsActions=function(t){return o._allKidsSubscriberActions()[t]},this._isKidsActionsEnabled=function(){return null!==o._watchActionKids&&o._model().is().collection()},this._watchSelector=function(t){return o._watchActionKids(t)},this._addKidsSubscriberActions=function(t,e){if(o._isKidsActionsEnabled()){for(var n=[],i=0,r=o._model().state;i<r.length;i++){var s=r[i];n.push(o._watchSelector(s)(e))}o._allKidsSubscriberActions()[t]=n}},this._refreshKidsSubscriberActions=function(){for(var t in o._allKidsSubscriberActions())o._stopKidsSubscriberActions(t),o._addKidsSubscriberActions(t,o.get()[t])},this._stopKidsSubscriberActions=function(t){var e=o._subscriberKidsActions(t);if(e){for(var n=0;n<e.length;n++)e[n].stop();e.length=0,delete o._allKidsSubscriberActions()[t]}},this._m=t,this._watchActionKids=n},x=function(t){var e=this;this._model=function(){return e._m},this._stateSubscriber=function(){return e._stateSubscriberManager},this._storeSubscriber=function(){return e._storeSubscriberManager},this.onStateChanged=function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return(t=e._stateSubscriber()).notify.apply(t,n)},this.onStoreChanged=function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return(t=e._storeSubscriber()).notify.apply(t,n)},this.state=function(t){return e._stateSubscriber().add(t)},this.store=function(t){return e._storeSubscriber().add(t)},this.all=function(t){var n=e.state(t),o=e.store(t),i=O(Math.random().toString()).toString();return new K(i,(function(){n.stop(),o.stop()}))},this.action=function(){return{state:e.state,store:e.store,all:e.all}},this._m=t,this._stateSubscriberManager=new N(this._model(),(function(t){return t.watch().state})),this._storeSubscriberManager=new N(this._model(),null)},I=function(){function t(e){for(var n=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];this._prevStateStore=null,this._state=null,this._prevState=null,this.super=function(){return{option:function(){return n._option},prevState:n._prevState,prevStateStore:n._prevStateStore}},this._set=function(e){if(void 0===e&&(e=n.state),!t._isObject(e)&&!t._isArray(e))throw n.is().collection()?f.onlyArrayOnCollectionState():f.onlyObjectOnModelState();return n._state=n.is().collection()?n.to().listClass(e):e,n.action()},this._watchManager=function(){return n._watch},this._handleStateChanger=function(t){var e=n.to().plain();JSON.stringify(t)!==JSON.stringify(e)&&(n._setPrevState(t),n._watchManager().onStateChanged(n.super().prevState,e),n.is().collection()||M(n))},this._setPrevState=function(t){return n._prevState=t},this._setPrevStateStore=function(t){return n._prevStateStore=t},this.localStore=function(){return n._localStore},this.is=function(){return n._is},this.watch=function(){return n._watchManager().action()},this.action=function(t){void 0===t&&(t=void 0);var e=n.super().option().get(),o=e.save,i=e.store;return{save:o||n.save,store:i||n.localStore().set,value:t}},this.save=function(){if(!n.is().connected())throw f.unauthorizedSave(n);var t=v.store().node(n.super().option().key()),e=n.to().plain();return JSON.stringify(t)!==JSON.stringify(e)&&(v.store().dispatch({payload:e,type:n.super().option().key()}),n._setPrevStateStore(t),n._watchManager().onStoreChanged(t,e)),n.action()},this.setState=function(e){void 0===e&&(e=n.state);var o=n.to().plain();if(n.is().collection()){var i=n._set(e);return n._handleStateChanger(o),i}if(!t._isObject(e))throw new Error(\"You can only set an object to setState on a Model\");return n._set(Object.assign({},n.state,e)),n._handleStateChanger(o),n.action()},this.deleteKey=function(t){if(n.is().collection())throw new Error(\"deleteKey can't be used in a Collection\");var e=n.to().plain();return t in n.state&&delete n.state[t]&&n._handleStateChanger(e),n.action()},this.deleteMultiKey=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(n.is().collection())throw new Error(\"deleteMultiKey can't be used in a Collection\");for(var o=n.to().plain(),i=0,r=0;r<t.length;r++)delete n.state[t[r]]&&i++;return i&&n._handleStateChanger(o),n.action()},this.hydrate=function(t){return S(t,n),n.is().empty()||M(n),n.setState()},this.kids=function(){return n.super().option().kids()},this.to=function(){var e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m(n,t[0])};return{listClass:function(e){void 0===e&&(e=[]);var o=n.super().option().nodeModel();if(!n.is().collection()||null==o)throw new Error(\"toListClass can only be called from a Collection\");for(var i=[],r=0;r<e.length;r++)e[r]instanceof t?i.push(e[r]):i.push(new o(e[r],n.super().option().kids()));return i},locallyStorableString:function(){return JSON.stringify(e(\"store\"))},string:function(){return JSON.stringify(e())},plain:e}},this._is=new A(this),this._option=new k(this,Object.assign({},o[0],o[1])),this._localStore=new E(this),this._watch=new x(this),this._set(e),this.is().connected()&&v.prepareModel(this)}return Object.defineProperty(t.prototype,\"state\",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.ParseStoredJSON=function(t){return w(t)},t._isArray=function(t){return Array.isArray(t)},t._isObject=function(e){return null!==e&&\"object\"===typeof e&&!Array.isArray(e)&&!(e instanceof t)&&!(e instanceof Date)},t._isCollection=function(e){return e instanceof t&&e.is().collection()},t}(),j=function(t){function s(n,a){void 0===n&&(n=[]);for(var c=[],u=2;u<arguments.length;u++)c[u-2]=arguments[u];var l=t.call(this,[],Object.assign.apply(Object,r([{}],c,[{nodeModel:a[0],collectionModel:a[1]}])))||this;if(l.concat=function(t){return void 0===t&&(t=[]),l._newCollectionModelInstance(l.state.slice().concat(l.to().listClass(t)))},l.count=function(){return l.state.length},l.defaultNodeState=function(){return l._newNodeModelInstance(void 0).defaultState},l.delete=function(t){var e=l.indexOf(l.newNode(t)),n=l.state.slice();if(e>-1){var o=n.splice(e,1);if(o.length)return l.setState(n),l.action(o[0])}return l.action()},l.deleteBy=function(t){var n=l.to().plain();return e.remove(n,t).length&&l.setState(l.to().listClass(n)),l.action()},l.deleteIndex=function(t){var e=l.splice(t,1).value;return l.action(e.length?e[0]:void 0)},l.find=function(t){var n=e.find(l.to().plain(),t);if(n){var o=l.findIndex(n);return o<0?void 0:l.state[o]}},l.findIndex=function(t){return e.findIndex(l.to().plain(),t)},l.filter=function(t){for(var n=[],o=0,i=e.filter(l.to().plain(),t);o<i.length;o++){var r=i[o],s=l.find(r);s&&n.push(s)}return l._newCollectionModelInstance(n)},l.indexOf=function(t){return e.findIndex(l.to().plain(),l.newNode(t).to().plain())},l.limit=function(t){return l.slice(0,t)},l.map=function(t){for(var e=l.state,n=[],o=0;o<e.length;o++){var i=t(e[o],o);i&&n.push(i)}return n},l.newCollection=function(t){return l._isCollectionModel(t)?t:l._newCollectionModelInstance(t)},l.newNode=function(t){return l._isNodeModel(t)?t:l._newNodeModelInstance(t)},l.nodeAt=function(t){return l.state[t]&&l._isNodeModel(l.state[t])?l.state[t]:void 0},l.offset=function(t){return l.slice(t)},l.orderBy=function(t,n){void 0===t&&(t=[]),void 0===n&&(n=[]);for(var o=[],i=0,r=e.orderBy(l.to().plain(),t,n);i<r.length;i++){var s=r[i],a=l.find(s);a&&o.push(a)}return l._newCollectionModelInstance(o)},l.pop=function(){var t=l.state.slice(),e=t.pop();return e&&l.setState(t),l.action(e)},l.push=function(t){var e=l.state.slice(),n=e.push(l.newNode(t));return n&&l.setState(e),l.action(n)},l.reduce=function(t,e){void 0===e&&(e=l.count()?l.nodeAt(0):null);for(var n=l.state,o=0;o<n.length;o++)e=t(e,n[o]);return e},l.reverse=function(){var t=l.state.slice().reverse();return new(l._getCollectionModel())(t,l.super().option().kids())},l.shift=function(){var t=l.state.slice(),e=t.shift();return e&&l.setState(t),l.action(e)},l.slice=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(l._getCollectionModel())((t=l.state).slice.apply(t,e),l.super().option().kids())},l.splice=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],o=t[1],i=t.slice(2,t.length),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=l.state.slice(),o=n.splice.apply(n,t);return l.setState(n),l.action(o)};if(\"number\"!==typeof n)throw new Error(\"splice start parameter must be a number\");if(!o)return s(n);if(\"number\"!==typeof o)throw new Error(\"splice deleteCount parameter must be a number\");if(0==i.length)return s(n,o);for(var a=0;a<i.length;a++){if(!l._isNodeModel(i[a])&&!I._isObject(i[a]))throw new Error(\"items parameter must be an Objet or the same Model than collection's nodes\");i[a]=l.newNode(i[a])}return s.apply(void 0,r([n,o],i))},l.update=function(t,e){var n=l.newNode(t),o=l.state.slice();return o[e]?(o[e]=n,l.setState(o),l.action(n)):l.push(n)},l._getCollectionModel=function(){return l.super().option().collectionModel()},l._getNodeModel=function(){return l.super().option().nodeModel()},l._isCollectionModel=function(t){return t instanceof l._getCollectionModel()},l._isNodeModel=function(t){return t instanceof l._getNodeModel()},l._newCollectionModelInstance=function(t){return new(l._getCollectionModel())(t,l.super().option().kids())},l._newNodeModelInstance=function(t){return new(l._getNodeModel())(t,l.super().option().kids())},l._newNodeModelInstance(void 0)instanceof s)throw f.forbiddenMultiDimCollection();return o(l,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return(t=!this.is().connected())?[3,2]:[4,this.localStore().get()];case 1:t=!e.sent(),e.label=2;case 2:return t&&this.setState(this.to().listClass(n)),[2]}}))})),l}return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(s,t),s}(I);t.Collection=j,t.Model=I,t.config=l,t.manager=v,Object.defineProperty(t,\"__esModule\",{value:!0})}(e,n(\"uhf/\"))},JX7q:function(t,e,n){\"use strict\";function o(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}n.d(e,\"a\",(function(){return o}))},Ji7U:function(t,e,n){\"use strict\";function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if(\"function\"!==typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}n.d(e,\"a\",(function(){return i}))},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},foSv:function(t,e,n){\"use strict\";function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,\"a\",(function(){return o}))},md7G:function(t,e,n){\"use strict\";function o(t){return(o=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function i(t){return(i=\"function\"===typeof Symbol&&\"symbol\"===o(Symbol.iterator)?function(t){return o(t)}:function(t){return t&&\"function\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":o(t)})(t)}n.d(e,\"a\",(function(){return s}));var r=n(\"JX7q\");function s(t,e){return!e||\"object\"!==i(e)&&\"function\"!==typeof e?Object(r.a)(t):e}},rePB:function(t,e,n){\"use strict\";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,\"a\",(function(){return o}))},yLpj:function(t,e){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(o){\"object\"===typeof window&&(n=window)}t.exports=n}}]);","extractedComments":["/*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */"]}